
//Get path start point for placing ball
function pathStartPoint(path) {
    var d = path.attr("d"),
    dsplitted = d.split(" ");
}
function translateAlong(path) {
    var l = path.getTotalLength();
    return function(i) {
        return function(t) {
            var p = path.getPointAtLength(t * l);
            return "translate(" + p.x + "," + p.y + ")";//Move ball
        }
    }
}



var frame = d3.select(".spinner").append("svg")
                .attr("class", "svg-frame")
                .attr("viewBox", "-50 -50 600 600"); // It's naturally 0 0 500 500. 
                                                     // Changing it to 600 600 makes it a bit smaller
                                                     // Changing it to -50 -50 re centers it.  

var rail2 = "M252.941,250.338c-79.606,49.82-8.533,166.434,81.392,120.662    c30.278-15.41,64.228-79.551,66.667-150.667c3.021-88.102-80.866-128.893-181.918-109.195    C117.011,131.035,62.438,176.261,82.333,278.333c20.098,103.104,93.563,164.098,196.667,144    c104.146-20.301,162.969-114.521,142.667-218.667C401.162,98.471,315.582,40.686,210.386,61.191    C104.126,81.903,34.778,184.834,55.489,291.093c20.922,107.334,124.893,177.383,232.226,156.461    c108.417-21.133,179.174-126.154,158.04-234.57c0,0-19.547-133.388-148.916-121.076c0,0-184.889,2.757-129.86,166.589    C222.008,422.328,376.041,263.359,252.941,250.338"
var rail2b = "M250,250c92.481-16.317,80.539-113.049-19.99-104.356  c-33.848,2.926-72.221,15.16-101.16,80.166c-35.852,80.533-2.861,152.931,98.199,172.581  c102.082,19.848,191.677-4.805,211.526-106.886C458.624,188.392,391.288,88.55,288.176,68.501  C184.021,48.25,83.171,116.267,62.919,220.421c-20.456,105.206,48.248,207.075,153.454,227.531  c106.269,20.662,209.167-48.735,229.83-155.004c20.871-107.343-49.228-211.28-156.57-232.151  C181.207,39.715,76.219,110.522,55.138,218.948c0,0-31.92,130.979,92.619,168.099c0,0,172.42,66.804,182.87-105.707  C341.078,108.83,140.776,191.751,250,250"
var rail2c = "M250,250c-25.62,90.348,71.712,126.563,107.701,32.296  c12.118-31.739,17.832-71.608-28.063-125.986c-56.857-67.367-136.395-69.227-198.126,13.166  c-62.354,83.226-79.214,174.609,4.011,236.963c84.067,62.984,203.274,45.895,266.258-38.172  c63.621-84.916,46.357-205.328-38.559-268.948C277.45,35.056,155.821,52.494,91.559,138.268  c-64.912,86.64-47.298,209.496,39.341,274.408c87.515,65.568,211.613,47.776,277.18-39.739  c66.23-88.398,48.259-213.75-40.141-279.979c0,0-103.973-85.813-191.659,10.098c0,0-135.271,126.068,15.439,210.659  C342.428,398.305,350.029,177.082,250,250"

var rail3 = "M244.268,250c-106.678-28.647-90,116-0.5,142.376  c104.555,30.813,198.25-31.69,198.25-141.043c0-108.258-87.887-196.02-196.145-196.02c-107.176,0-194.123,86.883-194.123,194.06  c0,106.104,85.983,192.119,192.088,192.119c105.043,0,190.182-85.154,190.182-190.197c0-103.994-84.311-188.296-188.304-188.296  c-102.953,0-186.417,83.46-186.417,186.413c0,101.923,82.623,184.549,184.547,184.549c100.904,0,182.702-81.8,182.702-182.704  c0-99.895-80.98-180.876-180.876-180.876c-98.897,0-179.068,80.171-179.068,179.068c0,97.907,66.342,142.929,164.163,147.052  c86,3.625,145.34-54.517,128.75-149.5C330.912,83.213,93.268,176,244.268,250"
var rail3b = "M250,250c69.92,85.511,150.896-16.757,81.962-115.922    c-62.216-89.5-179.493-89.941-243.3-1.134c-63.168,87.918-43.002,210.471,44.918,273.64c87.038,62.536,208.345,42.71,270.882-44.33    c61.911-86.169,42.271-206.192-43.896-268.104c-85.311-61.294-204.139-41.816-265.43,43.491    c-60.681,84.454-41.401,202.113,43.054,262.792c83.61,60.072,200.091,40.994,260.164-42.615    c59.472-82.774,40.584-198.086-42.19-257.558c-81.947-58.876-196.104-40.174-254.982,41.771    c-58.288,81.126-39.776,194.143,41.353,252.433c80.314,57.706,192.203,39.377,249.909-40.939    c57.129-79.512,29.521-154.785-47.516-215.21c-67.728-53.125-155.663-33.034-218.356,40.22C0.148,326.247,337.264,464.518,250,250"
var rail4 = "M249.5,250.5c-97.612-51.698-117.877,179-7.42,179  c109.353,0,200.5-68.147,200.5-177.5c0-108.259-87.762-196.02-196.02-196.02c-107.176,0-194.06,86.883-194.06,194.06  c0,106.104,86.015,192.119,192.12,192.119c105.043,0,190.198-85.154,190.198-190.198c0-103.993-84.303-188.296-188.296-188.296  c-102.953,0-186.413,83.46-186.413,186.413c0,101.924,82.625,184.549,184.549,184.549c100.904,0,182.704-81.799,182.704-182.703  c0-99.896-80.981-180.877-180.877-180.877c-98.896,0-179.067,80.171-179.067,179.068c0,97.908,79.369,177.277,177.277,177.277  c96.928,0,175.503-78.576,175.503-175.504c0-95.959-77.789-173.75-173.749-173.75c-95,0-172.011,77.012-172.011,172.012  c0,94.049,77.093,163.225,171.143,163.225c93.109,0,135.625-69.766,135.625-162.875c0-92.178-96.67-135.103-135.625-129.125  C72.08,148,170.5,386.5,249.5,250.5"
var rail4b = "M249.5,250.5c105.689,32.104,77.364-200.678-31.06-179.583  C111.101,91.802,34.646,176.103,55.53,283.442c20.675,106.266,123.583,175.651,229.849,154.976  c105.203-20.469,173.895-122.346,153.426-227.55C418.541,106.716,317.682,38.712,213.53,58.977  C110.42,79.038,43.096,178.888,63.158,281.998C83.019,384.077,181.87,450.728,283.948,430.867  c101.059-19.662,167.043-117.525,147.381-218.583C411.863,112.236,314.979,46.912,214.932,66.377  C115.885,85.648,51.213,181.563,70.483,280.61c19.078,98.057,114.035,162.082,212.092,143.004  c97.076-18.888,160.46-112.895,141.573-209.971C405.449,117.538,312.383,54.788,216.278,73.486  C121.133,91.998,59.011,184.134,77.522,279.277c18.327,94.193,109.541,155.695,203.733,137.369  c93.251-18.144,154.138-108.445,135.994-201.697C399.288,122.631,310.403,69.452,218.084,87.414  c-91.396,17.782-119.805,94.383-102.022,185.779c17.604,90.48,120.693,114.153,157.79,100.846  C439.073,314.77,301.072,101.916,249.5,250.5"
var rail4c = "M249.5,250.5c54.107-96.299-175.013-122.475-177.758-12.053    c-2.718,109.32,63.143,202.132,172.462,204.849c108.225,2.692,198.142-82.862,200.83-191.087    c2.664-107.143-82.032-196.16-189.176-198.823C149.787,50.749,61.66,134.6,59.024,240.671    c-2.611,105.012,80.4,192.255,185.412,194.867c103.961,2.584,190.332-79.598,192.917-183.558    c2.559-102.922-78.802-188.431-181.723-190.989c-101.893-2.533-186.545,78.013-189.08,179.906    c-2.507,100.872,77.233,184.68,178.106,187.187c99.865,2.483,182.833-76.46,185.316-176.324    c2.459-98.867-75.695-181.005-174.561-183.464c-97.878-2.432-179.196,74.939-181.629,172.817    c-2.409,96.897,74.19,177.401,171.087,179.811c95.93,2.385,175.629-73.447,178.015-169.376    c2.36-94.972-72.714-173.873-167.685-176.234c-94.02-2.337-165.09,73.011-167.428,167.033    c-2.313,93.082,66.374,137.317,159.454,139.632c92.149,2.291,154.156-92.387,149.147-131.479C374.071,76.392,58.964,111,249.5,250.5"

var path2 = frame.append("path")
                .attr("d", rail2)
var path2b = frame.append("path")
                .attr("d", rail2b);
var path2c = frame.append("path")
                .attr("d", rail2c);
var path3 = frame.append("path")
                .attr("d", rail3);
var path3b = frame.append("path")
                .attr("d", rail3b);
var path4 = frame.append("path")
                .attr("d", rail4);
var path4b = frame.append("path")
                .attr("d", rail4b);
var path4c = frame.append("path")
                .attr("d", rail4c);                


//DRAW BALLS
var group = frame.append("g")
                .attr("class", "gooey");

var ballLightGreen = group.append("circle")
              .attr("r", 40)
              .attr("fill", "#B3D45E") //Lighter Green
              .attr("class", "balls");  

var ballPurple = group.append("circle")
              .attr("r", 45)
              .attr("fill", "#603C87") //Purple
              .attr("class", "balls");            
              
var ballRed = group.append("circle")
              .attr("r", 50)
              .attr("fill", "#E04A42") //Red
              .attr("class", "balls");
              
var ballYellow = group.append("circle")
              .attr("r", 55)
              .attr("fill", "#EFD24A") //Yellow
              .attr("class", "balls");

var ballDarkGreen = group.append("circle")
              .attr("r", 65)
              .attr("fill", "#28A483") //Darker Green
              .attr("class", "balls");

var ballBlue = group.append("circle")
              .attr("r", 65)
              .attr("fill", "#2F639F") //Blue
              .attr("class", "balls");           

var ballPink = group.append("circle")
              .attr("r", 70)
              .attr("fill", "#CF3574") //Pink
              .attr("class", "balls");

/////////////////////////
///LOGO/////////////////
///////////////////////

//Slash
var logoSlashStart = "243.694,202.666 228.249,229.413 228.316,229.529 243.771,202.798"
var logoSlashEnd = "244.694,203.666 229.249,230.413 260.135,283.841 291.02,283.905";

var logoSlash = frame.append("polygon")
                    .attr("points", logoSlashStart)
                    .attr("fill", "#ffffff");

logoSlash.transition()
        .duration(500)
        .attr("points", logoSlashEnd);

//Circle
var logoCircle = frame.append("circle")
                        .attr("cx", 223.662)
                        .attr("cy", 267.508)
                        .attr("r", 0)
                        .attr("fill", "#ffffff");

logoCircle.transition()
        .duration(500)
        .attr("r", 15.111);




//Return to centre when you hover a ball
frame.selectAll(".balls")
              .on("mouseover", function(){
                  frame.selectAll(".balls").transition()
                      .duration(1000)
                      .attr("transform", "translate(0,0)") //Reset the translate or it'll be X,Y + the translate
                      .attr("cx", 250)
                      .attr("cy", 250)
              })

//Animate
function animate(ballID, duration, rail) {
    ballID.transition()
        .duration(duration)
        .ease(d3.easePolyInOut)
        .attrTween("transform", translateAlong(rail.node()))
}

animate(ballLightGreen, 30000, path3b);
animate(ballDarkGreen, 30000, path2b);
animate(ballBlue, 30000, path2c);
animate(ballRed, 30000, path3);
animate(ballYellow, 30000, path4);
animate(ballPurple, 30000, path4b);
animate(ballPink, 30000, path4c);